<!-- to-do refactor -->
<script>
  var currentGame = "<%= @game.id %>"
  var currentTurnstate = "<%= @game.turnstate %>"
  var currentUser = <%= session[:user_id]  || 0 %>
  var currentUserColour = "<%= @current_colour %>" 
  var currentPhase = "<%= @game.phase %>"
  var currentSquares = "<%= @squares %>"
  var gameActive = <%= @game.active  %>
</script>

<div id="container-container">
<div id="info-div" class="player-info-phase">
  <h3 id="turn-phase" class="info-shove">It is <%= @game.turnstate  %>'s turn to <%=@game.phase  %></h3>
  <h3 id="current-colour" class="info-shove">You are playing as <%= @current_colour %></h3>

  <div id='button-container'>
    <h1 class="btn btn-warning" id='end-turn-button'>End Turn</h1>
  <!-- this p is here to give the container some filling, because everything else is floated -->
    <p>&nbsp;</p>
  </div>
  
  <% if !@game.active %>
    <p class ='game-over'><%= @winner_name %> won the hoto</p>
  <% end %>
</div>

<div id="game-board-encase">
  <table id='game-board'>  
  <% @board.each_with_index do |row, y|  %>
  <tr>

    <% row.each_with_index do |square, x|
       if square.colour != 'black' && square.colour != 'white'
        square.colour = 'empty'
       end      
    %>

        <td class='<%= square.colour %> game-square unselected' data-x="<%= x + 1 %>" data-y="<%= y + 1 %>">
        <span class="pieces">
        <%= square.height %>
        </span></td>



      <%    end %>
  </tr>
  <% end %>

  </table>
</div>
</div>


<script>  doTheGame() </script>